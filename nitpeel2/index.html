<!DOCTYPE html>

<html lang="en">
<head runat="server">
    <title>nitpeel2</title>
    <meta charset="UTF-8">
    <meta name="author" content="NAOS">

	<meta http-equiv="cache-control" content="max-age=200"/>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
	<meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="edge_includes/animate.css" media="screen"/>
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>  
    <!-- <link href="favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <script type="text/javascript" charset="utf-8" src="index_edgePreload.js"></script> -->
    <script src="edge_includes/jquery-2.0.3.min.js"></script>


</head>
<body style="margin:0px;">
<input type="hidden" name="" id="pagename" value="index2.html">
<div id="Stage" class="EDGE-144335490" style="position: fixed;">
	<link rel="stylesheet" type="text/css" href="images/slide2.css" media="screen"/><div class="s1"><img src="images/s1.png" width="1080" height="810" alt=""/></div><div class="s2"><img src="images/s2.png"/></div><div class="s3"><img src="images/s3.png"/></div><div class="s4"><img src="images/s4.png"/></div><div class="home" onclick="home()"></div>
	
	<div class="image-comparison-container-1" onclick="expandTab()">
		<img id="img1" src="images/s5.png" width="375" height="336" style="display: none;">
		<img id="img2" src="images/s6.png" width="375" height="336" style="display: none;">
		<canvas id="compareCanvas" width="375" height="336"></canvas>
	</div>
	<div class="black-Backdrop" onclick="shrinkTab()"><img src="images/s9.png"/></div>
	<div class="image-comparison-container-2">
		<img src="images/s7.png" alt="Before" class="image-comparison-img-2">
		<img src="images/s8.png" alt="After" class="image-comparison-img-2">
		<div class="slider-2"></div>
	</div>
</div>
<div id="divIntro" style="width:auto;display:none;position: fixed; color: #1f1e1e;background-color: lavender; color: #696565;border-radius: 5px; font-family: Arial, Helvetica, sans-serif;font-weight: 600;padding:5px;font-size: 17px;"></div>
<span id="clickEventDuration" style="display: none;"></span>
<script src="getUserAction.js"></script>
  <script>
       var clickEventDurationData=$("#clickEventDuration").text();
           var jsonData = (clickEventDurationData=='')? [] : JSON.parse(clickEventDurationData);
           console.log(jsonData);
   function addEventduration(){
        var dt = new Date();
        var time = dt.getHours() + ":" + dt.getMinutes() + ":" + dt.getSeconds();        
        var id=$("#pagename").val();
        var data = { 'Id': id, 'Time': time };
        jsonData.push(data);
        var formData = JSON.stringify(jsonData);
        $('#clickEventDuration').text(formData);    
    }

     addEventduration(); 
    
        // function getslide() {

        //     $(".EDGE-144335490").on("swipeleft", swipeHandlerleft);
        //     $(".EDGE-144335490").on("swiperight", swipeHandlerright);
        //     // Callback function references the event target and get the slide number
        //     function swipeHandlerleft(event) { 
        //         window.location.href="../pigmentbio3/index.html?jsondata=" + encodeURIComponent(JSON.stringify(urlprops));
        //     }
        //     function swipeHandlerright(event) {
        //         window.location.href="../pigmentbio1/index.html?jsondata=" + encodeURIComponent(JSON.stringify(urlprops));

        //     }
        // } 
        // setTimeout(function(){ $("div.EDGE-144335490").css("background-color", "#e1e5ea"); }, 900);

document.addEventListener('touchstart', handleTouchStart, false);        
document.addEventListener('touchmove', handleTouchMove, false);
var urlprops=$("#clickEventDuration").text();

var xDown = null;                                                        
var yDown = null;

function getTouches(evt) {
  return evt.touches ||             // browser API
         evt.originalEvent.touches; // jQuery
}                                                     

function handleTouchStart(evt) {
    const firstTouch = getTouches(evt)[0];                                      
    xDown = firstTouch.clientX;                                      
    yDown = firstTouch.clientY;                                      
};                                                
                                                                         
function handleTouchMove(evt) {
    if ( ! xDown || ! yDown ) {        
        return;
    }

    var xUp = evt.touches[0].clientX;                                    
    var yUp = evt.touches[0].clientY;

    var xDiff = xDown - xUp;
    var yDiff = yDown - yUp;

    if ( Math.abs( xDiff ) > Math.abs( yDiff ) ) {/*most significant*/        
        if ( xDiff > 0 ) {
             //window.location.href="../nitpeel3/index.html?jsondata=" + encodeURIComponent(JSON.stringify(urlprops));
            // console.log("right swipe ");
        } else {
            // console.log("left swipe");
             //window.location.href="../nitpeel1/index.html?jsondata=" + encodeURIComponent(JSON.stringify(urlprops));
        }                       
    } else {
        if ( yDiff > 0 ) {
            // console.log(" down swipe ");
        } else { 
            // console.log("left swipe");
        }                                                                 
    }
    /* reset values */
    xDown = null;
    yDown = null;                                             
};


// $(document).ready(function () {
//         $('#img01').click(function (e) {
//             $('#divIntro')
//                 .show()
//                 .text('At location - X: ' + e.pageX + ' Y:' + e.pageY)
//                 .css({ position: 'fixed', color: '#000',
//                     left: e.pageX, top: e.pageY
//             });
//         });
//     });



		var mousex=0;
        var mousey=0;

        document.addEventListener("mousemove", () => {
           mousex = event.clientX; // Gets Mouse X
           mousey = event.clientY; // Gets Mouse Y
          console.log([mousex, mousey]); // Prints data
        });

        $('#image').click(function(e){
            $('#divIntro').hide()
            console.log("====="+mousex+"====");
            var x = parseInt(mousex);
            var y = parseInt(mousey);
            // console.log(typeof x);
            // console.log(typeof y); 
            // alert("X:"+x+" y:"+y);
             // return;
                console.log(x +"-"+ y);
            var width = screen.width;
            // if(width>=1020){
                if(99<=x && 180>=x) {
                    // console.log(x);
                    if(325<=y && 530>=y){
                        // console.log(y);
                        // console.log("smoothing reparing creame");
                        window.location.href="../pigmentbio4/index.html?jsondata=" + encodeURIComponent(JSON.stringify(urlprops));
                    }
                } 
                
                if(290<=x && 355>=x) {
                    if(339<=y && 530>=y){
                        // console.log(y);
                        // console.log("smoothing reparing creame");
                        window.location.href="../pigmentbio6/index.html?jsondata=" + encodeURIComponent(JSON.stringify(urlprops));
                    }
                } 
                
                if(443<=x && 590>=x) {
                    if(395<=y && 520>=y){
                        // console.log(y);
                        // console.log("smoothing reparing creame");
                        window.location.href="../pigmentbio9/index.html?jsondata=" + encodeURIComponent(JSON.stringify(urlprops));
                    }
                }
                 if(680<=x && 735>=x) {
                    if(340<=y && 520>=y){
                        // console.log(y);
                        // console.log("smoothing reparing creame");
                        window.location.href="../pigmentbio13/index.html?jsondata=" + encodeURIComponent(JSON.stringify(urlprops));
                    } 
                }
                
                if(847<=x && 940>=x) {
                    if(330<=y && 530>=y){
                        // console.log(y);
                        // console.log("smoothing reparing creame");
                        window.location.href="../pigmentbio24/index.html?jsondata=" + encodeURIComponent(JSON.stringify(urlprops));
                    } 
                }
                
                // if(480<=x && 580>=x) {
                //     // console.log(x);
                //     if(0<=y && 35>=y){
                //         // console.log(y);
                //         // console.log("smoothing reparing creame");
                //         window.location.href="../pigmentbio4/index.html?jsondata=" + encodeURIComponent(JSON.stringify(urlprops));
                //     }
                // } 
                
                // if(590<=x && 690>=x) {
                //     if(0<=y && 35>=y){
                //         // console.log(y);
                //         // console.log("smoothing reparing creame");
                //         window.location.href="../pigmentbio6/index.html?jsondata=" + encodeURIComponent(JSON.stringify(urlprops));
                //     }
                // } 
                
                // if(700<=x && 800>=x) {
                //     if(0<=y && 35>=y){
                //         // console.log(y);
                //         // console.log("smoothing reparing creame");
                //         window.location.href="../pigmentbio9/index.html?jsondata=" + encodeURIComponent(JSON.stringify(urlprops));
                //     }
                // }
                 
                //  if(810<=x && 910>=x) {
                //     if(0<=y && 35>=y){
                //         // console.log(y);
                //         // console.log("smoothing reparing creame");
                //         window.location.href="../pigmentbio13/index.html?jsondata=" + encodeURIComponent(JSON.stringify(urlprops));
                //     } 
                // }
                
                // if(920<=x && 1020>=x) {
                //     if(0<=y && 35>=y){
                //         // console.log(y);
                //         // console.log("smoothing reparing creame");
                //         window.location.href="../pigmentbio24/index.html?jsondata=" + encodeURIComponent(JSON.stringify(urlprops));
                //     } 
                // }  
                
                if(55<=x && 225>=x) {
                    // console.log(x);
                    if(545<=y && 600>=y){
                        // console.log(y);
                        // console.log("smoothing reparing creame");
                        $('#divIntro')
                        .show()
                        .text('200ml tube')
                        .css({ 
                            left: 100, top: 610
                        });
                    }
                }

                if(255<=x && 400>=x) {
                    console.log("true");
                    if(540<=y && 580>=y){
                        // console.log(y);
                        // console.log("smoothing reparing creame");
                        $('#divIntro')
                        .show()
                        .text('40ml tube')
                        .css({ 
                            left: 300, top: 600
                        });
                    }
                } 

                if(435<=x && 600>=x) {
                    console.log("true");
                    if(550<=y && 605>=y){
                        // console.log(y);
                        // console.log("smoothing reparing creame");
                        $('#divIntro')
                        .show()
                        .text('50ml tube')
                        .css({ 
                            left: 480, top: 615
                        });
                    }
                } 

                if(620<=x && 790>=x) {
                    console.log("true");
                    if(550<=y && 605>=y){
                        // console.log(y);
                        // console.log("smoothing reparing creame");
                        $('#divIntro')
                        .show()
                        .text('15ml tube')
                        .css({ 
                            left: 685, top: 615
                        });
                    }
                } 

                if(815<=x && 975>=x) {
                    console.log("true");
                    if(550<=y && 625>=y){
                        // console.log(y);
                        // console.log("smoothing reparing creame");
                        $('#divIntro')
                        .show()
                        .text('75ml tube')
                        .css({  
                            left: 865, top: 630
                        });
                    }
                } 
        });


        // setTimeout(function(){ $("div.EDGE-144335490").css("background-color", "#e1e5ea"); }, 900);
    </script>
	<script>	
		function home() {
			window.location.href="../nitpeel1/index.html?jsondata=" + encodeURIComponent(JSON.stringify(urlprops));
		}
		function tab() {
			window.location.href="../nitpeel3/index.html?jsondata=" + encodeURIComponent(JSON.stringify(urlprops));
		}
	</script>


<script>
function initializeImageComparison(containerSelector, sliderSelector, comparisonImgSelector) {
    const container = document.querySelector(containerSelector);
    const slider = container.querySelector(sliderSelector);
    const images = container.querySelectorAll(comparisonImgSelector);

    let isDragging = false;

    function slide(e) {
        const posX = e.clientX || (e.touches && e.touches[0].clientX);
        const rect = container.getBoundingClientRect();
        let offsetX = posX - rect.left;

        // Constrain the offset
        offsetX = Math.max(0, Math.min(offsetX, rect.width));

        slider.style.left = `${offsetX}px`;
        if (images[1]) {
            images[1].style.clip = `rect(0, ${offsetX}px, ${rect.height}px, 0)`;
        }
    }

    const startDragging = () => { isDragging = true; };
    const stopDragging = () => { isDragging = false; };

    slider.addEventListener('mousedown', startDragging);
    slider.addEventListener('touchstart', startDragging);
    document.addEventListener('mouseup', stopDragging);
    document.addEventListener('touchend', stopDragging);
    document.addEventListener('mousemove', (e) => { if (isDragging) slide(e); });
    document.addEventListener('touchmove', (e) => { if (isDragging) slide(e); });
}

// Initialize both sliders

initializeImageComparison('.image-comparison-container-2', '.slider-2', '.image-comparison-img-2');


function expandTab() {
	$('.image-comparison-container-2').css("display","block");
	$('.black-Backdrop').css("display","block");
}

function shrinkTab() {
	$('.image-comparison-container-2').css("display","none");
	$('.black-Backdrop').css("display","none");
}
</script>



  <script>
    const canvas = document.getElementById('compareCanvas');
    const ctx = canvas.getContext('2d');
    const img1 = document.getElementById('img1');
    const img2 = document.getElementById('img2');
    let sliderX = canvas.width / 5;
    let isDragging = false;

    function draw() {
      // Draw first image fully
      ctx.drawImage(img1, 0, 0, canvas.width, canvas.height);

      // Clip and draw second image
      ctx.save();
      ctx.beginPath();
      ctx.rect(0, 0, sliderX, canvas.height);
      ctx.clip();
      ctx.drawImage(img2, 0, 0, canvas.width, canvas.height);
      ctx.restore();

      // Optional: draw a slider handle
      ctx.beginPath();
      ctx.moveTo(sliderX, 0);
      ctx.lineTo(sliderX, canvas.height);
      ctx.lineWidth = 5;
      ctx.strokeStyle = 'rgba(255, 255, 255, 1)';
      ctx.stroke();
    }

    function updateSlider(x) {
      const rect = canvas.getBoundingClientRect();
      sliderX = Math.max(0, Math.min(canvas.width, x - rect.left));
      draw();
    }

    canvas.addEventListener('mousedown', (e) => {
      isDragging = true;
      updateSlider(e.clientX);
    });

    canvas.addEventListener('mousemove', (e) => {
      if (isDragging) updateSlider(e.clientX);
    });

    canvas.addEventListener('mouseup', () => {
      isDragging = false;
    });

    canvas.addEventListener('mouseleave', () => {
      isDragging = false;
    });

    canvas.addEventListener('touchstart', (e) => {
      if (e.touches.length === 1) {
        isDragging = true;
        updateSlider(e.touches[0].clientX);
      }
    });

    canvas.addEventListener('touchmove', (e) => {
      if (isDragging && e.touches.length === 1) {
        updateSlider(e.touches[0].clientX);
      }
    });

    canvas.addEventListener('touchend', () => {
      isDragging = false;
    });

    // Ensure both images are loaded before drawing
    let loadedCount = 0;
    [img1, img2].forEach(img => {
      if (img.complete) {
        loadedCount++;
        if (loadedCount === 2) draw();
      } else {
        img.onload = () => {
          loadedCount++;
          if (loadedCount === 2) draw();
        };
      }
    });
  </script>

</body>
</html>